<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administraci√≥n Empresarial - Opsis Suite</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', Helvetica, Arial, sans-serif;
            background: var(--bg-gradient);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.5;
            font-size: 15px;
            font-weight: 400;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        :root {
            --primary-color: #1c7ed6;
            --primary-hover: #1971c2;
            --secondary-color: #495057;
            --success-color: #37b24d;
            --warning-color: #fd7e14;
            --danger-color: #e03131;
            --info-color: #339af0;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --text-tertiary: #adb5bd;
            --bg-gradient: linear-gradient(135deg, #f8f9fc 0%, #e9ecf1 100%);
            --bg-card: rgba(255, 255, 255, 0.95);
            --bg-glass: rgba(255, 255, 255, 0.8);
            --bg-overlay: rgba(0, 0, 0, 0.02);
            --border-color: rgba(0, 0, 0, 0.06);
            --border-light: rgba(0, 0, 0, 0.04);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.04);
            --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 16px 40px rgba(0, 0, 0, 0.12);
            --shadow-xl: 0 24px 64px rgba(0, 0, 0, 0.15);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
        }

        [data-theme="dark"] {
            --bg-gradient: linear-gradient(135deg, #1a1d29 0%, #2d3748 100%);
            --bg-card: rgba(45, 55, 72, 0.95);
            --bg-glass: rgba(45, 55, 72, 0.8);
            --bg-overlay: rgba(255, 255, 255, 0.02);
            --text-primary: #f7fafc;
            --text-secondary: #a0aec0;
            --text-tertiary: #718096;
            --border-color: rgba(255, 255, 255, 0.08);
            --border-light: rgba(255, 255, 255, 0.04);
        }

        .container { max-width: 1800px; margin: 0 auto; padding: 2rem; }

        .admin-header {
            background: var(--bg-card);
            backdrop-filter: blur(24px) saturate(180%);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-xl);
            padding: 2.5rem 3rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        .admin-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--info-color), var(--success-color));
            opacity: 0.8;
        }

        .header-content { display: flex; justify-content: space-between; align-items: center; position: relative; }

        .header-left h1 {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.3rem;
            letter-spacing: -0.02em;
        }

        .header-subtitle {
            font-size: 1rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .header-controls { display: flex; align-items: center; gap: 1rem; }

        .theme-toggle {
            background: var(--bg-glass);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 0.6rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-secondary);
            font-size: 1.2rem;
        }

        .theme-toggle:hover {
            background: var(--primary-color);
            color: white;
            transform: scale(1.05);
        }

        .admin-badge {
            background: linear-gradient(135deg, var(--primary-color), var(--info-color));
            color: white;
            padding: 0.7rem 1.4rem;
            border-radius: var(--radius-lg);
            font-size: 0.85rem;
            font-weight: 600;
            letter-spacing: 0.02em;
            box-shadow: 0 4px 16px rgba(28, 126, 214, 0.25);
            white-space: nowrap;
        }

        .main-nav {
            background: var(--bg-card);
            backdrop-filter: blur(24px) saturate(180%);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            margin-bottom: 2rem;
            box-shadow: var(--shadow-md);
            overflow: hidden;
        }

        .nav-tabs { display: flex; padding: 0.5rem; gap: 0.3rem; overflow-x: auto; }

        .nav-tab {
            background: transparent;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: var(--radius-md);
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .nav-tab:hover { background: var(--bg-overlay); color: var(--text-primary); }
        .nav-tab.active {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 2px 8px rgba(28, 126, 214, 0.3);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--bg-card);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 2rem;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .stat-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--stat-color, var(--primary-color));
            opacity: 0.6;
        }

        .stat-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1.2rem; }

        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--stat-color, var(--primary-color))15, var(--stat-color, var(--primary-color))25);
            color: var(--stat-color, var(--primary-color));
            font-size: 1.3rem;
            font-weight: 600;
        }

        .stat-trend {
            font-size: 0.8rem;
            padding: 0.3rem 0.7rem;
            border-radius: var(--radius-sm);
            font-weight: 600;
        }

        .trend-up { background: rgba(55, 178, 77, 0.1); color: var(--success-color); }
        .trend-down { background: rgba(224, 49, 49, 0.1); color: var(--danger-color); }
        .trend-neutral { background: rgba(73, 80, 87, 0.1); color: var(--text-secondary); }

        .stat-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.3rem;
            letter-spacing: -0.02em;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.95rem;
            font-weight: 500;
            margin-bottom: 0.8rem;
        }

        .stat-details {
            color: var(--text-tertiary);
            font-size: 0.8rem;
            line-height: 1.4;
        }

        .stat-users { --stat-color: #1c7ed6; }
        .stat-modules { --stat-color: #37b24d; }
        .stat-security { --stat-color: #e03131; }
        .stat-performance { --stat-color: #fd7e14; }
        .stat-storage { --stat-color: #9775fa; }
        .stat-activity { --stat-color: #339af0; }

        .content-panel {
            background: var(--bg-card);
            backdrop-filter: blur(24px) saturate(180%);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            overflow: hidden;
            min-height: 800px;
        }

        .panel-header {
            padding: 2rem 2.5rem;
            background: var(--bg-overlay);
            border-bottom: 1px solid var(--border-light);
        }

        .panel-title {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            letter-spacing: -0.01em;
        }

        .panel-description {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .panel-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .panel-body { padding: 2.5rem; }

        .users-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .search-box {
            position: relative;
            flex: 1;
            max-width: 400px;
        }

        .search-input {
            width: 100%;
            padding: 0.8rem 1rem 0.8rem 2.5rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            background: var(--bg-glass);
            color: var(--text-primary);
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(28, 126, 214, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 0.8rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-tertiary);
            font-size: 1rem;
        }

        .filter-controls { display: flex; gap: 1rem; }

        .users-table {
            background: var(--bg-glass);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        .table-header {
            background: var(--bg-overlay);
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border-light);
            display: grid;
            grid-template-columns: 1fr 2fr 1.5fr 1fr 1fr 120px;
            gap: 1rem;
            align-items: center;
            font-weight: 600;
            font-size: 0.85rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .table-row {
            padding: 1.2rem 1.5rem;
            border-bottom: 1px solid var(--border-light);
            display: grid;
            grid-template-columns: 1fr 2fr 1.5fr 1fr 1fr 120px;
            gap: 1rem;
            align-items: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .table-row:hover { background: var(--bg-overlay); }
        .table-row:last-child { border-bottom: none; }

        .user-info { display: flex; align-items: center; gap: 0.8rem; }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--info-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .user-details h4 {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.2rem;
            font-size: 0.95rem;
        }

        .user-details span {
            color: var(--text-tertiary);
            font-size: 0.8rem;
        }

        .status-badge {
            padding: 0.4rem 0.8rem;
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .status-active { background: rgba(55, 178, 77, 0.15); color: var(--success-color); }
        .status-inactive { background: rgba(224, 49, 49, 0.15); color: var(--danger-color); }
        .status-pending { background: rgba(253, 126, 20, 0.15); color: var(--warning-color); }

        .role-badge {
            padding: 0.3rem 0.7rem;
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            font-weight: 500;
            background: var(--bg-overlay);
            color: var(--text-secondary);
            border: 1px solid var(--border-light);
        }

        .btn {
            padding: 0.7rem 1.2rem;
            border-radius: var(--radius-md);
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before { left: 100%; }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--info-color));
            color: white;
            box-shadow: 0 2px 8px rgba(28, 126, 214, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(28, 126, 214, 0.4);
        }

        .btn-secondary {
            background: var(--bg-glass);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-color), #51cf66);
            color: white;
            box-shadow: 0 2px 8px rgba(55, 178, 77, 0.3);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning-color), #ffa94d);
            color: white;
            box-shadow: 0 2px 8px rgba(253, 126, 20, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger-color), #f03e3e);
            color: white;
            box-shadow: 0 2px 8px rgba(224, 49, 49, 0.3);
        }

        .btn-sm {
            padding: 0.5rem 0.8rem;
            font-size: 0.8rem;
            gap: 0.3rem;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            z-index: 10000;
        }

        .modal.show { display: flex; align-items: center; justify-content: center; }

        .modal-content {
            background: var(--bg-card);
            backdrop-filter: blur(24px) saturate(180%);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-xl);
            padding: 2.5rem;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-xl);
            transform: scale(0.9);
            animation: slideIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        @keyframes slideIn { to { transform: scale(1); } }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-light);
        }

        .modal-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-tertiary);
            padding: 0.5rem;
            border-radius: var(--radius-sm);
            transition: all 0.3s ease;
        }

        .modal-close:hover { background: var(--bg-overlay); color: var(--text-primary); }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .form-group { margin-bottom: 1.5rem; }
        .form-group.full-width { grid-column: 1 / -1; }

        .form-label {
            display: block;
            margin-bottom: 0.6rem;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .form-control {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            background: var(--bg-glass);
            color: var(--text-primary);
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(28, 126, 214, 0.1);
            background: white;
        }

        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1.5rem;
        }

        .module-card {
            background: var(--bg-glass);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 2rem;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .module-card.active {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(55, 178, 77, 0.05), rgba(81, 207, 102, 0.05));
        }

        .module-card.active::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--success-color), #51cf66);
        }

        .module-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; }

        .module-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            background: linear-gradient(135deg, var(--primary-color), var(--info-color));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .toggle-switch {
            position: relative;
            width: 52px;
            height: 28px;
            background: var(--text-tertiary);
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-switch.active { background: var(--success-color); }

        .toggle-switch::before {
            content: '';
            position: absolute;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: white;
            top: 2px;
            left: 2px;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .toggle-switch.active::before { transform: translateX(24px); }

        .module-name {
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .module-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .module-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: var(--text-tertiary);
        }

        .notification {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: var(--bg-card);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 1rem 1.3rem;
            box-shadow: var(--shadow-lg);
            z-index: 10001;
            min-width: 320px;
            transform: translateX(400px);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .notification.show { transform: translateX(0); }
        .notification.success { border-left: 4px solid var(--success-color); }
        .notification.error { border-left: 4px solid var(--danger-color); }
        .notification.warning { border-left: 4px solid var(--warning-color); }
        .notification.info { border-left: 4px solid var(--info-color); }

        .notification-content { display: flex; align-items: center; gap: 0.8rem; }

        .notification-icon { width: 24px; text-align: center; font-weight: 600; }

        .notification-text {
            flex: 1;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .notification-close {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-tertiary);
            font-size: 1.2rem;
            padding: 0.2rem;
        }

        .content-tabs { display: none; }
        .content-tabs.active { display: block; animation: fadeInUp 0.4s ease; }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .loading { display: flex; align-items: center; justify-content: center; padding: 3rem 2rem; color: var(--text-secondary); }

        .spinner {
            width: 24px;
            height: 24px;
            border: 2px solid var(--border-color);
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 1200px) {
            .container { max-width: 100%; padding: 1.5rem; }
            .stats-grid { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
            .form-grid { grid-template-columns: 1fr; }
            .table-header, .table-row { grid-template-columns: 1fr; gap: 0.5rem; }
        }

        @media (max-width: 768px) {
            .header-content { flex-direction: column; gap: 1rem; text-align: center; }
            .users-controls { flex-direction: column; align-items: stretch; }
            .search-box { max-width: none; }
            .nav-tabs { justify-content: center; }
            .modules-grid { grid-template-columns: 1fr; }
            .panel-actions { justify-content: center; }
            .filter-controls { flex-direction: column; width: 100%; }
        }
    </style>
</head>
<body data-theme="light">
    <div class="container">
        <div class="admin-header">
            <div class="header-content">
                <div class="header-left">
                    <h1>Centro de Control Empresarial</h1>
                    <div class="header-subtitle">Administraci√≥n completa de <span id="companyName">Constructora Demo S.A.</span></div>
                </div>
                <div class="header-controls">
                    <button class="theme-toggle" onclick="toggleTheme()" id="themeToggle" title="Cambiar tema">üåô</button>
                    <div class="admin-badge">Administrador Principal</div>
                </div>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card stat-users">
                <div class="stat-header">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-trend trend-up">+12%</div>
                </div>
                <div class="stat-value" id="totalUsers">24</div>
                <div class="stat-label">Usuarios Activos</div>
                <div class="stat-details">18 activos, 4 pendientes, 2 inactivos</div>
            </div>
            <div class="stat-card stat-modules">
                <div class="stat-header">
                    <div class="stat-icon">üì¶</div>
                    <div class="stat-trend trend-up">4/6</div>
                </div>
                <div class="stat-value" id="activeModules">67%</div>
                <div class="stat-label">M√≥dulos Activos</div>
                <div class="stat-details">Warehouse, HR, Projects, TimeSync</div>
            </div>
            <div class="stat-card stat-security">
                <div class="stat-header">
                    <div class="stat-icon">üîí</div>
                    <div class="stat-trend trend-neutral">Estable</div>
                </div>
                <div class="stat-value" id="securityScore">92</div>
                <div class="stat-label">Score de Seguridad</div>
                <div class="stat-details">2FA: 85%, Pol√≠ticas actualizadas</div>
            </div>
            <div class="stat-card stat-performance">
                <div class="stat-header">
                    <div class="stat-icon">‚ö°</div>
                    <div class="stat-trend trend-up">+5%</div>
                </div>
                <div class="stat-value" id="performance">99.1%</div>
                <div class="stat-label">Uptime del Sistema</div>
                <div class="stat-details">√öltima falla: hace 12 d√≠as</div>
            </div>
            <div class="stat-card stat-storage">
                <div class="stat-header">
                    <div class="stat-icon">üíΩ</div>
                    <div class="stat-trend trend-up">78%</div>
                </div>
                <div class="stat-value" id="storageUsed">12.4GB</div>
                <div class="stat-label">Almacenamiento</div>
                <div class="stat-details">de 16GB total disponible</div>
            </div>
            <div class="stat-card stat-activity">
                <div class="stat-header">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-trend trend-up">+23%</div>
                </div>
                <div class="stat-value" id="dailyActivity">1,847</div>
                <div class="stat-label">Operaciones Hoy</div>
                <div class="stat-details">Check-ins, escaneos, reportes</div>
            </div>
        </div>

        <div class="main-nav">
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showTab('users', this)">üë• Gesti√≥n de Usuarios</button>
                <button class="nav-tab" onclick="showTab('modules', this)">üì¶ M√≥dulos y Servicios</button>
                <button class="nav-tab" onclick="showTab('roles', this)">üè∑Ô∏è Roles y Permisos</button>
                <button class="nav-tab" onclick="showTab('company', this)">üè¢ Configuraci√≥n Empresarial</button>
                <button class="nav-tab" onclick="showTab('security', this)">üîí Centro de Seguridad</button>
                <button class="nav-tab" onclick="showTab('analytics', this)">üìä Analytics y Reportes</button>
                <button class="nav-tab" onclick="showTab('billing', this)">üí≥ Facturaci√≥n y Planes</button>
                <button class="nav-tab" onclick="showTab('support', this)">üéØ Soporte T√©cnico</button>
            </div>
        </div>

        <div class="content-panel">
            <div id="tab-users" class="content-tabs active">
                <div class="panel-header">
                    <div class="panel-title">Gesti√≥n de Usuarios</div>
                    <div class="panel-description">Administra todos los usuarios de la empresa, sus roles, permisos y estados de cuenta</div>
                    <div class="panel-actions">
                        <button class="btn btn-primary" onclick="showModal('addUserModal')">+ Agregar Usuario</button>
                        <button class="btn btn-secondary" onclick="importUsers()">üì• Importar CSV</button>
                        <button class="btn btn-secondary" onclick="exportUsers()">üì§ Exportar Datos</button>
                        <button class="btn btn-warning" onclick="bulkOperations()">‚ö° Operaciones Masivas</button>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="users-controls">
                        <div class="search-box">
                            <span class="search-icon">üîç</span>
                            <input type="text" class="search-input" placeholder="Buscar usuarios por nombre, email o rol..." id="userSearch" oninput="filterUsers()">
                        </div>
                        <div class="filter-controls">
                            <select class="form-control" id="statusFilter" onchange="filterUsers()">
                                <option value="">Todos los estados</option>
                                <option value="active">Activos</option>
                                <option value="inactive">Inactivos</option>
                                <option value="pending">Pendientes</option>
                            </select>
                            <select class="form-control" id="roleFilter" onchange="filterUsers()">
                                <option value="">Todos los roles</option>
                                <option value="supervisor">Supervisor</option>
                                <option value="operativo">Operativo</option>
                                <option value="almacen">Almac√©n</option>
                                <option value="rrhh">RRHH</option>
                                <option value="finanzas">Finanzas</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="users-table">
                        <div class="table-header">
                            <div>Usuario</div>
                            <div>Informaci√≥n de Contacto</div>
                            <div>Rol y Departamento</div>
                            <div>Estado</div>
                            <div>√öltimo Acceso</div>
                            <div>Acciones</div>
                        </div>
                        <div id="usersTableBody"></div>
                    </div>
                </div>
            </div>

            <div id="tab-modules" class="content-tabs">
                <div class="panel-header">
                    <div class="panel-title">M√≥dulos y Servicios</div>
                    <div class="panel-description">Configura y administra los m√≥dulos disponibles para tu empresa</div>
                    <div class="panel-actions">
                        <button class="btn btn-success" onclick="enableAllModules()">‚úÖ Activar Todos</button>
                        <button class="btn btn-warning" onclick="configureIntegrations()">üîß Configurar Integraciones</button>
                        <button class="btn btn-secondary" onclick="viewUsageStats()">üìä Estad√≠sticas de Uso</button>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="modules-grid" id="modulesGrid"></div>
                </div>
            </div>

            <div id="tab-roles" class="content-tabs">
                <div class="panel-header">
                    <div class="panel-title">Roles y Permisos</div>
                    <div class="panel-description">Define roles personalizados y configura permisos granulares</div>
                </div>
                <div class="panel-body">
                    <div class="loading">
                        <div class="spinner"></div>
                        Sistema de roles y permisos en desarrollo...
                    </div>
                </div>
            </div>

            <div id="tab-company" class="content-tabs">
                <div class="panel-header">
                    <div class="panel-title">Configuraci√≥n Empresarial</div>
                    <div class="panel-description">Informaci√≥n legal, branding y configuraciones corporativas</div>
                </div>
                <div class="panel-body">
                    <div class="loading">
                        <div class="spinner"></div>
                        Configuraci√≥n empresarial en desarrollo...
                    </div>
                </div>
            </div>

            <div id="tab-security" class="content-tabs">
                <div class="panel-header">
                    <div class="panel-title">Centro de Seguridad</div>
                    <div class="panel-description">Pol√≠ticas de seguridad, compliance y auditor√≠a</div>
                </div>
                <div class="panel-body">
                    <div class="loading">
                        <div class="spinner"></div>
                        Centro de seguridad en desarrollo...
                    </div>
                </div>
            </div>

            <div id="tab-analytics" class="content-tabs">
                <div class="panel-header">
                    <div class="panel-title">Analytics y Reportes</div>
                    <div class="panel-description">Business intelligence y analytics empresariales</div>
                </div>
                <div class="panel-body">
                    <div class="loading">
                        <div class="spinner"></div>
                        Sistema de analytics en desarrollo...
                    </div>
                </div>
            </div>

            <div id="tab-billing" class="content-tabs">
                <div class="panel-header">
                    <div class="panel-title">Facturaci√≥n y Planes</div>
                    <div class="panel-description">Gesti√≥n de suscripciones, pagos y an√°lisis de costos</div>
                </div>
                <div class="panel-body">
                    <div class="loading">
                        <div class="spinner"></div>
                        Sistema de facturaci√≥n en desarrollo...
                    </div>
                </div>
            </div>

            <div id="tab-support" class="content-tabs">
                <div class="panel-header">
                    <div class="panel-title">Soporte T√©cnico</div>
                    <div class="panel-description">Centro de ayuda, tickets de soporte y documentaci√≥n</div>
                </div>
                <div class="panel-body">
                    <div class="loading">
                        <div class="spinner"></div>
                        Centro de soporte en desarrollo...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="addUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Agregar Nuevo Usuario</div>
                <button class="modal-close" onclick="closeModal('addUserModal')">√ó</button>
            </div>
            <form onsubmit="addUser(event)">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Nombre</label>
                        <input type="text" class="form-control" name="firstName" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Apellido</label>
                        <input type="text" class="form-control" name="lastName" required>
                    </div>
                    <div class="form-group full-width">
                        <label class="form-label">Email Corporativo</label>
                        <input type="email" class="form-control" name="email" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Tel√©fono</label>
                        <input type="tel" class="form-control" name="phone">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Rol Principal</label>
                        <select class="form-control" name="role" required>
                            <option value="">Seleccionar rol</option>
                            <option value="supervisor">Supervisor</option>
                            <option value="operativo">Operativo</option>
                            <option value="almacen">Almac√©n</option>
                            <option value="estimador">Project Manager</option>
                            <option value="rrhh">Recursos Humanos</option>
                            <option value="finanzas">Finanzas</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Departamento</label>
                        <select class="form-control" name="department" required>
                            <option value="">Seleccionar departamento</option>
                            <option value="operaciones">Operaciones</option>
                            <option value="logistica">Log√≠stica</option>
                            <option value="proyectos">Proyectos</option>
                            <option value="rrhh">Recursos Humanos</option>
                            <option value="finanzas">Finanzas</option>
                        </select>
                    </div>
                </div>
                <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 2rem;">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addUserModal')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Crear Usuario</button>
                </div>
            </form>
        </div>
    </div>

    <div id="notificationContainer"></div>

    <script>
        let enterpriseData = {
            users: [
                {id: '1', firstName: 'Juan Carlos', lastName: 'P√©rez Molina', email: 'juan.perez@constructora.com', phone: '+56 9 8765 4321', role: 'supervisor', department: 'operaciones', status: 'active', lastLogin: '2025-01-28 09:45'},
                {id: '2', firstName: 'Mar√≠a Elena', lastName: 'Gonz√°lez Rojas', email: 'maria.gonzalez@constructora.com', phone: '+56 9 7654 3210', role: 'operativo', department: 'logistica', status: 'active', lastLogin: '2025-01-28 14:22'},
                {id: '3', firstName: 'Carlos Alberto', lastName: 'L√≥pez Silva', email: 'carlos.lopez@constructora.com', phone: '+56 9 6543 2109', role: 'almacen', department: 'logistica', status: 'active', lastLogin: '2025-01-27 16:30'},
                {id: '4', firstName: 'Ana Patricia', lastName: 'Mart√≠nez Torres', email: 'ana.martinez@constructora.com', phone: '+56 9 5432 1098', role: 'rrhh', department: 'rrhh', status: 'inactive', lastLogin: '2025-01-25 11:15'},
                {id: '5', firstName: 'Roberto Daniel', lastName: 'Fern√°ndez Mora', email: 'roberto.fernandez@constructora.com', phone: '+56 9 4321 0987', role: 'estimador', department: 'proyectos', status: 'pending', lastLogin: 'Nunca'}
            ],
            modules: [
                {id: 'warehouse', name: 'Warehouse Management', description: 'Gesti√≥n completa de inventario, equipos y materiales', icon: 'üì¶', active: true, category: 'Operaciones', usageCount: 247},
                {id: 'hr', name: 'Human Resources', description: 'Gesti√≥n integral de personal y n√≥minas', icon: 'üë•', active: true, category: 'RRHH', usageCount: 156},
                {id: 'projects', name: 'Project Management', description: 'Gesti√≥n de proyectos y cronogramas', icon: 'üèóÔ∏è', active: true, category: 'Proyectos', usageCount: 89},
                {id: 'timesync', name: 'TimeSync', description: 'Control de horarios y asistencia', icon: '‚è±Ô∏è', active: true, category: 'Control', usageCount: 324},
                {id: 'finance', name: 'Finance', description: 'Gesti√≥n financiera y contabilidad', icon: 'üí∞', active: false, category: 'Finanzas', usageCount: 0},
                {id: 'compliance', name: 'Compliance', description: 'Cumplimiento regulatorio y auditor√≠a', icon: 'üìã', active: false, category: 'Cumplimiento', usageCount: 0}
            ]
        };

        function toggleTheme() {
            const currentTheme = document.body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.body.setAttribute('data-theme', newTheme);
            document.getElementById('themeToggle').textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
            localStorage.setItem('admin-theme', newTheme);
            showNotification(`Tema ${newTheme === 'dark' ? 'oscuro' : 'claro'} activado`, 'success');
        }

        function loadSavedTheme() {
            const savedTheme = localStorage.getItem('admin-theme');
            if (savedTheme) {
                document.body.setAttribute('data-theme', savedTheme);
                document.getElementById('themeToggle').textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
            }
        }

        function showNotification(message, type = 'success', duration = 4000) {
            const container = document.getElementById('notificationContainer');
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            const iconMap = { success: '‚úÖ', error: '‚ùå', warning: '‚ö†Ô∏è', info: '‚ÑπÔ∏è' };
            
            notification.innerHTML = `
                <div class="notification-content">
                    <div class="notification-icon">${iconMap[type] || 'üì¢'}</div>
                    <div class="notification-text">${message}</div>
                    <button class="notification-close" onclick="this.parentElement.parentElement.remove()">√ó</button>
                </div>
            `;
            
            container.appendChild(notification);
            setTimeout(() => notification.classList.add('show'), 100);
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, duration);
        }

        function showTab(tabName, element) {
            document.querySelectorAll('.content-tabs').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            document.getElementById(`tab-${tabName}`).classList.add('active');
            element.classList.add('active');
            
            if (tabName === 'users') loadUsers();
            else if (tabName === 'modules') loadModules();
        }

        function showModal(modalId) { document.getElementById(modalId).classList.add('show'); }
        function closeModal(modalId) { document.getElementById(modalId).classList.remove('show'); }

        function loadUsers() {
            const tbody = document.getElementById('usersTableBody');
            tbody.innerHTML = '';
            
            const filteredUsers = filterUsersData();
            
            filteredUsers.forEach(user => {
                const row = document.createElement('div');
                row.className = 'table-row';
                row.innerHTML = `
                    <div class="user-info">
                        <div class="user-avatar">${user.firstName.charAt(0)}${user.lastName.charAt(0)}</div>
                        <div class="user-details">
                            <h4>${user.firstName} ${user.lastName}</h4>
                            <span>ID: ${user.id}</span>
                        </div>
                    </div>
                    <div>
                        <div style="font-weight: 500;">${user.email}</div>
                        <div style="color: var(--text-tertiary); font-size: 0.8rem;">${user.phone || 'Sin tel√©fono'}</div>
                    </div>
                    <div>
                        <div class="role-badge">${getRoleDisplayName(user.role)}</div>
                        <div style="color: var(--text-tertiary); font-size: 0.8rem; margin-top: 0.3rem;">${getDepartmentName(user.department)}</div>
                    </div>
                    <div>
                        <div class="status-badge status-${user.status}">${getStatusName(user.status)}</div>
                    </div>
                    <div>
                        <div style="font-weight: 500;">${formatDate(user.lastLogin)}</div>
                    </div>
                    <div>
                        <button class="btn btn-sm btn-secondary" onclick="editUser('${user.id}')" title="Editar">‚úèÔ∏è</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteUser('${user.id}')" title="Eliminar">üóëÔ∏è</button>
                    </div>
                `;
                tbody.appendChild(row);
            });
            
            document.getElementById('totalUsers').textContent = enterpriseData.users.length;
        }

        function filterUsersData() {
            const searchTerm = document.getElementById('userSearch')?.value.toLowerCase() || '';
            const statusFilter = document.getElementById('statusFilter')?.value || '';
            const roleFilter = document.getElementById('roleFilter')?.value || '';
            
            return enterpriseData.users.filter(user => {
                const matchesSearch = searchTerm === '' || user.firstName.toLowerCase().includes(searchTerm) || user.lastName.toLowerCase().includes(searchTerm) || user.email.toLowerCase().includes(searchTerm) || user.role.toLowerCase().includes(searchTerm);
                const matchesStatus = statusFilter === '' || user.status === statusFilter;
                const matchesRole = roleFilter === '' || user.role === roleFilter;
                return matchesSearch && matchesStatus && matchesRole;
            });
        }

        function filterUsers() { loadUsers(); }

        function addUser(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const newUser = {
                id: (enterpriseData.users.length + 1).toString(),
                firstName: formData.get('firstName'),
                lastName: formData.get('lastName'),
                email: formData.get('email'),
                phone: formData.get('phone') || '',
                role: formData.get('role'),
                department: formData.get('department'),
                status: 'pending',
                lastLogin: 'Nunca'
            };
            
            enterpriseData.users.push(newUser);
            loadUsers();
            closeModal('addUserModal');
            event.target.reset();
            showNotification(`Usuario ${newUser.firstName} ${newUser.lastName} agregado exitosamente`, 'success');
        }

        function editUser(userId) {
            const user = enterpriseData.users.find(u => u.id === userId);
            if (user) showNotification(`Editando usuario: ${user.firstName} ${user.lastName}`, 'info');
        }

        function deleteUser(userId) {
            const user = enterpriseData.users.find(u => u.id === userId);
            if (user && confirm(`¬øEliminar a ${user.firstName} ${user.lastName}?`)) {
                enterpriseData.users = enterpriseData.users.filter(u => u.id !== userId);
                loadUsers();
                showNotification(`Usuario eliminado`, 'success');
            }
        }

        function loadModules() {
            const grid = document.getElementById('modulesGrid');
            grid.innerHTML = '';
            
            enterpriseData.modules.forEach(module => {
                const moduleCard = document.createElement('div');
                moduleCard.className = `module-card ${module.active ? 'active' : ''}`;
                moduleCard.innerHTML = `
                    <div class="module-header">
                        <div class="module-icon">${module.icon}</div>
                        <div class="toggle-switch ${module.active ? 'active' : ''}" onclick="toggleModule('${module.id}')"></div>
                    </div>
                    <div class="module-name">${module.name}</div>
                    <div class="module-description">${module.description}</div>
                    <div class="module-stats">
                        <span>Categor√≠a: ${module.category}</span>
                        <span>Uso: ${module.usageCount} veces</span>
                    </div>
                `;
                grid.appendChild(moduleCard);
            });
            
            const activeModules = enterpriseData.modules.filter(m => m.active).length;
            const percentage = Math.round((activeModules / enterpriseData.modules.length) * 100);
            document.getElementById('activeModules').textContent = `${percentage}%`;
        }

        function toggleModule(moduleId) {
            const module = enterpriseData.modules.find(m => m.id === moduleId);
            if (module) {
                module.active = !module.active;
                loadModules();
                showNotification(`M√≥dulo ${module.name} ${module.active ? 'activado' : 'desactivado'}`, module.active ? 'success' : 'warning');
            }
        }

        function getRoleDisplayName(role) {
            const roleNames = { supervisor: 'Supervisor', operativo: 'Operativo', almacen: 'Almac√©n', estimador: 'Project Manager', rrhh: 'Recursos Humanos', finanzas: 'Finanzas' };
            return roleNames[role] || role;
        }

        function getDepartmentName(department) {
            const departmentNames = { operaciones: 'Operaciones', logistica: 'Log√≠stica', proyectos: 'Proyectos', rrhh: 'Recursos Humanos', finanzas: 'Finanzas' };
            return departmentNames[department] || department;
        }

        function getStatusName(status) {
            const statusNames = { active: 'Activo', inactive: 'Inactivo', pending: 'Pendiente' };
            return statusNames[status] || status;
        }

        function formatDate(dateString) {
            if (dateString === 'Nunca') return 'Nunca';
            try {
                return new Date(dateString).toLocaleDateString('es-CL', { day: '2-digit', month: '2-digit', year: '2-digit', hour: '2-digit', minute: '2-digit' });
            } catch { return dateString; }
        }

        function importUsers() { showNotification('Funci√≥n en desarrollo', 'info'); }
        function exportUsers() { showNotification('Exportaci√≥n completada', 'success'); }
        function bulkOperations() { showNotification('Operaciones masivas en desarrollo', 'info'); }
        function enableAllModules() {
            enterpriseData.modules.forEach(m => m.active = true);
            loadModules();
            showNotification('Todos los m√≥dulos activados', 'success');
        }
        function configureIntegrations() { showNotification('Configuraci√≥n en desarrollo', 'info'); }
        function viewUsageStats() { showNotification('Estad√≠sticas en desarrollo', 'info'); }

        document.addEventListener('DOMContentLoaded', function() {
            loadSavedTheme();
            loadUsers();
            loadModules();
            
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) e.target.classList.remove('show');
            });
            
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') document.querySelectorAll('.modal.show').forEach(modal => modal.classList.remove('show'));
            });
            
            showNotification('Panel administrativo cargado exitosamente', 'success');
        });
    </script>
</body>
</html>
