<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actividad del Equipo - SuperAdmin | Opsis Suite</title>
    <style>
        :root { --verdi-dark: #022326; --sidebar-width: 240px; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { background: #f8fafc; }
        body { opacity: 0; transition: opacity 0.15s ease-in; }
        body.loaded { opacity: 1; }
        .app-shell { min-height: 100vh; background: #f8fafc; }
        .sidebar { position: fixed; left: 0; top: 0; width: var(--sidebar-width); height: 100vh; background: var(--verdi-dark); }
        .main-content { margin-left: var(--sidebar-width); min-height: 100vh; background: #f8fafc; }

        /* Timeline */
        .activity-day { margin-bottom: 2rem; }
        .activity-day-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; }
        .activity-day-header h3 { font-size: 0.875rem; color: #64748b; font-weight: 600; }
        .activity-day-header::after { content: ''; flex: 1; height: 1px; background: #e2e8f0; }
        
        .activity-item { display: flex; gap: 1rem; padding: 1rem; background: white; border-radius: 10px; border: 1px solid #e2e8f0; margin-bottom: 0.75rem; transition: all 0.2s; }
        .activity-item:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        .activity-avatar { width: 40px; height: 40px; border-radius: 50%; background: #02735E; color: white; display: flex; align-items: center; justify-content: center; font-size: 0.875rem; font-weight: 600; flex-shrink: 0; }
        .activity-content { flex: 1; min-width: 0; }
        .activity-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.25rem; }
        .activity-user { font-weight: 600; font-size: 0.875rem; }
        .activity-action { color: #64748b; font-size: 0.875rem; }
        .activity-details { font-size: 0.8rem; color: #94a3b8; }
        .activity-time { font-size: 0.75rem; color: #94a3b8; white-space: nowrap; }
        
        .action-badge { display: inline-flex; align-items: center; gap: 0.25rem; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.7rem; font-weight: 500; }
        .action-badge.login { background: #dbeafe; color: #1d4ed8; }
        .action-badge.update { background: #dcfce7; color: #16a34a; }
        .action-badge.create { background: #f0fdf4; color: #15803d; }
        .action-badge.support { background: #fef3c7; color: #d97706; }
        .action-badge.delete { background: #fee2e2; color: #dc2626; }

        /* Filters */
        .filters-bar { display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1.5rem; padding: 1rem; background: white; border-radius: 10px; border: 1px solid #e2e8f0; }
        .filter-group { display: flex; align-items: center; gap: 0.5rem; }
        .filter-group label { font-size: 0.75rem; color: #64748b; }
        .filter-select { padding: 0.5rem 0.75rem; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 0.875rem; }

        /* Live indicator */
        .live-badge { display: inline-flex; align-items: center; gap: 0.375rem; padding: 0.375rem 0.75rem; background: #dcfce7; color: #16a34a; border-radius: 20px; font-size: 0.75rem; font-weight: 600; }
        .live-badge::before { content: ''; width: 6px; height: 6px; background: #16a34a; border-radius: 50%; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/superadmin/css/superadmin.css?v=7">
</head>
<body>
    <div class="app-shell">
        <aside class="sidebar" id="sidebar"></aside>
        <main class="main-content">
            <header class="header">
                <div class="header-left">
                    <h1 class="page-title">Actividad del Equipo</h1>
                    <p class="page-subtitle">Historial de acciones y eventos</p>
                </div>
                <div class="header-actions">
                    <span class="live-badge">En vivo</span>
                    <button class="btn btn-secondary" onclick="exportActivity()"><i class="fas fa-download"></i> Exportar</button>
                    <a href="index.html" class="btn btn-primary"><i class="fas fa-arrow-left"></i> Volver</a>
                </div>
            </header>

            <div class="page-content">
                <!-- Stats -->
                <div class="stats-grid" style="margin-bottom: 1.5rem;">
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-bolt"></i></div>
                        <div class="stat-content">
                            <div class="stat-value">47</div>
                            <div class="stat-label">Acciones Hoy</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon success"><i class="fas fa-users"></i></div>
                        <div class="stat-content">
                            <div class="stat-value">5</div>
                            <div class="stat-label">Usuarios Activos</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon info"><i class="fas fa-sign-in-alt"></i></div>
                        <div class="stat-content">
                            <div class="stat-value">12</div>
                            <div class="stat-label">Logins Hoy</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon warning"><i class="fas fa-ticket-alt"></i></div>
                        <div class="stat-content">
                            <div class="stat-value">8</div>
                            <div class="stat-label">Tickets Resueltos</div>
                        </div>
                    </div>
                </div>

                <!-- Filters -->
                <div class="filters-bar">
                    <div class="filter-group">
                        <label>Miembro:</label>
                        <select class="filter-select" onchange="filterActivity()">
                            <option value="">Todos</option>
                            <option>Carlos Westheimer</option>
                            <option>María González</option>
                            <option>Juan Pérez</option>
                            <option>Laura Martínez</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Tipo:</label>
                        <select class="filter-select" onchange="filterActivity()">
                            <option value="">Todos</option>
                            <option value="login">Login</option>
                            <option value="update">Actualización</option>
                            <option value="create">Creación</option>
                            <option value="support">Soporte</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Fecha:</label>
                        <input type="date" class="filter-select">
                    </div>
                </div>

                <!-- Timeline -->
                <div id="activityTimeline"></div>
            </div>
        </main>
    </div>

    <script src="/superadmin/js/sidebar.js"></script>
    <script src="/superadmin/js/data.js"></script>
    <script>
        document.body.classList.add('loaded');

        const activityData = [
            {
                date: 'Hoy',
                items: [
                    { user: 'Carlos Westheimer', avatar: 'CW', time: '5:30 PM', action: 'Inició sesión', type: 'login', details: 'Desde Chrome en MacOS' },
                    { user: 'Laura Martínez', avatar: 'LM', time: '5:15 PM', action: 'Resolvió ticket', type: 'support', details: 'Ticket #1847 - Problema de facturación' },
                    { user: 'Juan Pérez', avatar: 'JP', time: '4:45 PM', action: 'Actualizó cliente', type: 'update', details: 'Cambió plan de "Restaurantes Maya" a Enterprise' },
                    { user: 'María González', avatar: 'MG', time: '4:20 PM', action: 'Creó factura', type: 'create', details: 'Factura #INV-2024-089 por $2,450' },
                    { user: 'Diego López', avatar: 'DL', time: '3:50 PM', action: 'Resolvió ticket', type: 'support', details: 'Ticket #1846 - Consulta de integración' },
                    { user: 'Pedro Sánchez', avatar: 'PS', time: '3:30 PM', action: 'Inició sesión', type: 'login', details: 'Desde Safari en iOS' },
                    { user: 'Laura Martínez', avatar: 'LM', time: '2:15 PM', action: 'Actualizó cliente', type: 'update', details: 'Agregó módulo TimeSync a "Logística Express"' }
                ]
            },
            {
                date: 'Ayer',
                items: [
                    { user: 'Carlos Westheimer', avatar: 'CW', time: '6:00 PM', action: 'Cerró sesión', type: 'login', details: '' },
                    { user: 'María González', avatar: 'MG', time: '5:30 PM', action: 'Creó cliente', type: 'create', details: 'Nuevo cliente: "Constructora del Norte"' },
                    { user: 'Juan Pérez', avatar: 'JP', time: '4:00 PM', action: 'Actualizó configuración', type: 'update', details: 'Modificó tarifas de módulo Warehouse' },
                    { user: 'Diego López', avatar: 'DL', time: '2:30 PM', action: 'Resolvió ticket', type: 'support', details: 'Ticket #1844 - Capacitación completada' }
                ]
            }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            if (typeof SuperAdminSidebar !== 'undefined') SuperAdminSidebar.init();
            renderActivity();
        });

        function renderActivity() {
            const timeline = document.getElementById('activityTimeline');
            timeline.innerHTML = activityData.map(day => `
                <div class="activity-day">
                    <div class="activity-day-header"><h3>${day.date}</h3></div>
                    ${day.items.map(item => `
                        <div class="activity-item">
                            <div class="activity-avatar">${item.avatar}</div>
                            <div class="activity-content">
                                <div class="activity-header">
                                    <span class="activity-user">${item.user}</span>
                                    <span class="action-badge ${item.type}">${item.action}</span>
                                </div>
                                ${item.details ? `<div class="activity-details">${item.details}</div>` : ''}
                            </div>
                            <div class="activity-time">${item.time}</div>
                        </div>
                    `).join('')}
                </div>
            `).join('');
        }

        function filterActivity() {
            showNotification('Filtros aplicados', 'info');
        }

        function exportActivity() {
            showNotification('Actividad exportada', 'success');
        }

        function showNotification(msg, type = 'info') {
            const n = document.createElement('div');
            n.innerHTML = `<i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'}"></i> ${msg}`;
            n.style.cssText = `position: fixed; top: 20px; right: 20px; padding: 1rem 1.5rem; background: ${type === 'success' ? '#10b981' : '#3b82f6'}; color: white; border-radius: 8px; display: flex; align-items: center; gap: 0.75rem; font-weight: 500; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 9999;`;
            document.body.appendChild(n);
            setTimeout(() => { n.style.opacity = '0'; setTimeout(() => n.remove(), 300); }, 3000);
        }
    </script>
</body>
</html>
