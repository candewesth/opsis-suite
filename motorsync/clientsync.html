<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ClientSync - Gesti√≥n de Clientes | MotorSync</title>
  <link rel="preconnect" href="https://fonts.googleapis.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Helvetica+Neue:wght@400;500;600;700;900&display=swap">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --verdi-primary: #02735E;
      --verdi-secondary: #035951;
      --aire-light: #0dcaf0;
      --aire-medium: #06b6d4;
      --aire-dark: #0891b2;
      --green-light: #10b981;
      --green-medium: #20c997;
      --bg-light: #f8f9fa;
      --bg-white: #ffffff;
      --text-dark: #1a202c;
      --text-medium: #4a5568;
      --text-light: #718096;
      --border-color: #e2e8f0;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
      --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
      --shadow-lg: 0 10px 15px rgba(0,0,0,0.1);
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--bg-light);
      color: var(--text-dark);
    }

    /* ====== SIDEBAR ====== */
    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      width: 240px;
      height: 100vh;
      background: linear-gradient(180deg, var(--verdi-primary), var(--verdi-secondary));
      padding: 20px 0;
      z-index: 1000;
      box-shadow: var(--shadow-lg);
    }

    .logo {
      color: white;
      font-size: 24px;
      font-weight: bold;
      padding: 0 20px 30px;
      border-bottom: 1px solid rgba(255,255,255,0.2);
      margin-bottom: 20px;
    }

    .logo i {
      color: var(--aire-light);
      margin-right: 10px;
    }

    .sidebar-item {
      padding: 12px 20px;
      color: rgba(255,255,255,0.8);
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 15px;
    }

    .sidebar-item:hover {
      background: rgba(255,255,255,0.1);
      color: white;
    }

    .sidebar-item.active {
      background: rgba(255,255,255,0.15);
      color: white;
      border-left: 3px solid var(--aire-light);
    }

    .sidebar-item i {
      width: 20px;
      text-align: center;
    }

    /* ====== MAIN CONTENT ====== */
    .main-content {
      margin-left: 240px;
      padding: 30px;
      min-height: 100vh;
    }

    /* ====== HEADER ====== */
    .page-header {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: var(--shadow-sm);
      margin-bottom: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .page-title {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .page-title h1 {
      font-size: 28px;
      color: var(--verdi-primary);
    }

    .page-title .icon-circle {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, var(--aire-light), var(--aire-medium));
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 24px;
    }

    .header-actions {
      display: flex;
      gap: 12px;
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--verdi-primary), var(--verdi-secondary));
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .btn-secondary {
      background: white;
      color: var(--verdi-primary);
      border: 1px solid var(--verdi-primary);
    }

    .btn-secondary:hover {
      background: var(--bg-light);
    }

    /* ====== FILTERS ====== */
    .filters-bar {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: var(--shadow-sm);
      margin-bottom: 30px;
      display: grid;
      grid-template-columns: 1fr 1fr 1fr auto;
      gap: 15px;
      align-items: end;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .filter-group label {
      font-size: 13px;
      color: var(--text-medium);
      font-weight: 500;
    }

    .filter-group input,
    .filter-group select {
      padding: 10px 12px;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.3s;
    }

    .filter-group input:focus,
    .filter-group select:focus {
      outline: none;
      border-color: var(--verdi-primary);
      box-shadow: 0 0 0 3px rgba(2, 115, 94, 0.1);
    }

    /* ====== STATS CARDS ====== */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: var(--shadow-sm);
      transition: all 0.3s;
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
    }

    .stat-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .stat-icon {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      color: white;
    }

    .stat-value {
      font-size: 32px;
      font-weight: bold;
      color: var(--text-dark);
      margin-bottom: 5px;
    }

    .stat-label {
      font-size: 13px;
      color: var(--text-light);
    }

    .stat-trend {
      font-size: 13px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .stat-trend.up { color: var(--green-light); }
    .stat-trend.down { color: #ef4444; }

    /* ====== CLIENTS TABLE ====== */
    .clients-table-container {
      background: white;
      border-radius: 12px;
      box-shadow: var(--shadow-sm);
      overflow: hidden;
    }

    .table-header {
      padding: 20px;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .table-header h2 {
      font-size: 18px;
      color: var(--verdi-primary);
    }

    .view-toggle {
      display: flex;
      gap: 8px;
    }

    .view-btn {
      padding: 8px 12px;
      background: var(--bg-light);
      border: none;
      border-radius: 6px;
      cursor: pointer;
      color: var(--text-medium);
      transition: all 0.3s;
    }

    .view-btn.active {
      background: var(--verdi-primary);
      color: white;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    thead {
      background: var(--bg-light);
    }

    thead th {
      padding: 15px 20px;
      text-align: left;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-medium);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    tbody tr {
      border-bottom: 1px solid var(--border-color);
      transition: all 0.3s;
    }

    tbody tr:hover {
      background: var(--bg-light);
    }

    tbody td {
      padding: 18px 20px;
      font-size: 14px;
      color: var(--text-dark);
    }

    .client-info {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .client-avatar {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--aire-light), var(--aire-medium));
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 16px;
    }

    .client-details h4 {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-dark);
      margin-bottom: 3px;
    }

    .client-details p {
      font-size: 12px;
      color: var(--text-light);
    }

    .badge {
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
      display: inline-block;
    }

    .badge.active {
      background: #d1fae5;
      color: #065f46;
    }

    .badge.inactive {
      background: #fee2e2;
      color: #991b1b;
    }

    .badge.pending {
      background: #fef3c7;
      color: #92400e;
    }

    .priority-badge {
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 500;
    }

    .priority-high {
      background: #fee2e2;
      color: #991b1b;
    }

    .priority-medium {
      background: #fef3c7;
      color: #92400e;
    }

    .priority-low {
      background: #dbeafe;
      color: #1e3a8a;
    }

    .actions-cell {
      display: flex;
      gap: 8px;
    }

    .action-btn {
      width: 32px;
      height: 32px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
      background: var(--bg-light);
      color: var(--text-medium);
    }

    .action-btn:hover {
      background: var(--verdi-primary);
      color: white;
    }

    /* ====== MODAL ====== */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 2000;
      align-items: center;
      justify-content: center;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: white;
      border-radius: 12px;
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: var(--shadow-lg);
    }

    .modal-header {
      padding: 25px;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-header h2 {
      font-size: 20px;
      color: var(--verdi-primary);
    }

    .close-modal {
      width: 32px;
      height: 32px;
      border: none;
      background: var(--bg-light);
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-medium);
      transition: all 0.3s;
    }

    .close-modal:hover {
      background: #fee2e2;
      color: #991b1b;
    }

    .modal-body {
      padding: 25px;
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-group label {
      font-size: 14px;
      font-weight: 500;
      color: var(--text-dark);
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      padding: 10px 12px;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      font-size: 14px;
      font-family: inherit;
    }

    .form-group textarea {
      resize: vertical;
      min-height: 80px;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--verdi-primary);
      box-shadow: 0 0 0 3px rgba(2, 115, 94, 0.1);
    }

    .modal-footer {
      padding: 20px 25px;
      border-top: 1px solid var(--border-color);
      display: flex;
      justify-content: flex-end;
      gap: 12px;
    }

    /* ====== EMPTY STATE ====== */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-light);
    }

    .empty-state i {
      font-size: 64px;
      color: var(--border-color);
      margin-bottom: 20px;
    }

    .empty-state h3 {
      font-size: 18px;
      color: var(--text-medium);
      margin-bottom: 10px;
    }

    .empty-state p {
      font-size: 14px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>

  <!-- ====== SIDEBAR ====== -->
  <div class="sidebar">
    <div class="logo">
      <i class="fas fa-cogs"></i>
      MotorSync
    </div>
    
    <div class="sidebar-item" onclick="window.location.href='motorsync.html'">
      <i class="fas fa-home"></i>
      <span>Dashboard</span>
    </div>
    
    <div class="sidebar-item active">
      <i class="fas fa-users"></i>
      <span>ClientSync</span>
    </div>
    
    <div class="sidebar-item" onclick="window.location.href='analytics.html'">
      <i class="fas fa-chart-line"></i>
      <span>Analytics</span>
    </div>
    
    <div class="sidebar-item" onclick="window.location.href='motorsync.html#management'">
      <i class="fas fa-briefcase"></i>
      <span>Management</span>
    </div>
    
    <div class="sidebar-item" onclick="window.location.href='motorsync.html#settings'">
      <i class="fas fa-cog"></i>
      <span>Configuraci√≥n</span>
    </div>
  </div>

  <!-- ====== MAIN CONTENT ====== -->
  <div class="main-content">
    
    <!-- Header -->
    <div class="page-header">
      <div class="page-title">
        <div class="icon-circle">
          <i class="fas fa-users"></i>
        </div>
        <div>
          <h1>ClientSync</h1>
          <p style="color: var(--text-light); font-size: 14px; margin-top: 5px;">
            Gesti√≥n centralizada de clientes y relaciones
          </p>
        </div>
      </div>
      <div class="header-actions">
        <button class="btn btn-secondary" onclick="exportClients()">
          <i class="fas fa-download"></i>
          Exportar
        </button>
        <button class="btn btn-primary" onclick="openClientModal()">
          <i class="fas fa-plus"></i>
          Nuevo Cliente
        </button>
      </div>
    </div>

    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-header">
          <div class="stat-icon" style="background: linear-gradient(135deg, var(--verdi-primary), var(--verdi-secondary));">
            <i class="fas fa-users"></i>
          </div>
        </div>
        <div class="stat-value">247</div>
        <div class="stat-label">Total Clientes</div>
        <div class="stat-trend up">
          <i class="fas fa-arrow-up"></i>
          12% vs mes anterior
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-header">
          <div class="stat-icon" style="background: linear-gradient(135deg, var(--aire-light), var(--aire-medium));">
            <i class="fas fa-star"></i>
          </div>
        </div>
        <div class="stat-value">189</div>
        <div class="stat-label">Clientes Activos</div>
        <div class="stat-trend up">
          <i class="fas fa-arrow-up"></i>
          8% vs mes anterior
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-header">
          <div class="stat-icon" style="background: linear-gradient(135deg, var(--green-light), var(--green-medium));">
            <i class="fas fa-dollar-sign"></i>
          </div>
        </div>
        <div class="stat-value">$847K</div>
        <div class="stat-label">Valor Total</div>
        <div class="stat-trend up">
          <i class="fas fa-arrow-up"></i>
          15% vs mes anterior
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-header">
          <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
            <i class="fas fa-clock"></i>
          </div>
        </div>
        <div class="stat-value">23</div>
        <div class="stat-label">Pendientes</div>
        <div class="stat-trend down">
          <i class="fas fa-arrow-down"></i>
          5% vs mes anterior
        </div>
      </div>
    </div>

    <!-- Filters -->
    <div class="filters-bar">
      <div class="filter-group">
        <label>Buscar</label>
        <input type="text" placeholder="Nombre, email, tel√©fono..." id="search-input" oninput="filterClients()">
      </div>
      <div class="filter-group">
        <label>Estado</label>
        <select id="status-filter" onchange="filterClients()">
          <option value="">Todos</option>
          <option value="active">Activo</option>
          <option value="inactive">Inactivo</option>
          <option value="pending">Pendiente</option>
        </select>
      </div>
      <div class="filter-group">
        <label>Prioridad</label>
        <select id="priority-filter" onchange="filterClients()">
          <option value="">Todas</option>
          <option value="high">Alta</option>
          <option value="medium">Media</option>
          <option value="low">Baja</option>
        </select>
      </div>
      <div class="filter-group">
        <button class="btn btn-secondary" onclick="clearFilters()" style="width: 100%;">
          <i class="fas fa-times"></i>
          Limpiar
        </button>
      </div>
    </div>

    <!-- Clients Table -->
    <div class="clients-table-container">
      <div class="table-header">
        <h2>Lista de Clientes</h2>
        <div class="view-toggle">
          <button class="view-btn active" onclick="setView('table')">
            <i class="fas fa-table"></i>
          </button>
          <button class="view-btn" onclick="setView('grid')">
            <i class="fas fa-th"></i>
          </button>
        </div>
      </div>
      
      <table id="clients-table">
        <thead>
          <tr>
            <th>Cliente</th>
            <th>Contacto</th>
            <th>Estado</th>
            <th>Prioridad</th>
            <th>Proyectos</th>
            <th>Valor Total</th>
            <th>√öltima Actividad</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="clients-tbody">
          <!-- Se llenar√° con JavaScript -->
        </tbody>
      </table>
    </div>

  </div>

  <!-- ====== MODAL NUEVO/EDITAR CLIENTE ====== -->
  <div class="modal" id="client-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-title">Nuevo Cliente</h2>
        <button class="close-modal" onclick="closeClientModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <form id="client-form">
          <div class="form-grid">
            <div class="form-group">
              <label>Nombre *</label>
              <input type="text" id="client-name" required placeholder="Nombre completo">
            </div>
            <div class="form-group">
              <label>Email *</label>
              <input type="email" id="client-email" required placeholder="email@ejemplo.com">
            </div>
            <div class="form-group">
              <label>Tel√©fono</label>
              <input type="tel" id="client-phone" placeholder="(123) 456-7890">
            </div>
            <div class="form-group">
              <label>Empresa</label>
              <input type="text" id="client-company" placeholder="Nombre de la empresa">
            </div>
            <div class="form-group">
              <label>Estado</label>
              <select id="client-status">
                <option value="active">Activo</option>
                <option value="inactive">Inactivo</option>
                <option value="pending">Pendiente</option>
              </select>
            </div>
            <div class="form-group">
              <label>Prioridad</label>
              <select id="client-priority">
                <option value="low">Baja</option>
                <option value="medium">Media</option>
                <option value="high">Alta</option>
              </select>
            </div>
            <div class="form-group full-width">
              <label>Direcci√≥n</label>
              <input type="text" id="client-address" placeholder="Direcci√≥n completa">
            </div>
            <div class="form-group full-width">
              <label>Notas</label>
              <textarea id="client-notes" placeholder="Notas adicionales..."></textarea>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeClientModal()">
          Cancelar
        </button>
        <button class="btn btn-primary" onclick="saveClient()">
          <i class="fas fa-save"></i>
          Guardar Cliente
        </button>
      </div>
    </div>
  </div>

  <script>
    // ========== DATOS MOCK ==========
    let clients = [
      {
        id: 1,
        name: 'Juan P√©rez',
        email: 'juan.perez@email.com',
        phone: '(555) 123-4567',
        company: 'Constructora P√©rez S.A.',
        status: 'active',
        priority: 'high',
        projects: 5,
        totalValue: 125000,
        lastActivity: '2025-11-28',
        address: 'Calle Principal 123',
        notes: 'Cliente VIP, requiere atenci√≥n prioritaria'
      },
      {
        id: 2,
        name: 'Mar√≠a Gonz√°lez',
        email: 'maria.g@empresa.com',
        phone: '(555) 234-5678',
        company: 'Edificios Gonz√°lez',
        status: 'active',
        priority: 'medium',
        projects: 3,
        totalValue: 78000,
        lastActivity: '2025-11-27',
        address: 'Av. Reforma 456',
        notes: 'Interesada en proyectos de remodelaci√≥n'
      },
      {
        id: 3,
        name: 'Carlos Ram√≠rez',
        email: 'carlos.r@mail.com',
        phone: '(555) 345-6789',
        company: 'Inversiones CR',
        status: 'pending',
        priority: 'high',
        projects: 1,
        totalValue: 95000,
        lastActivity: '2025-11-25',
        address: 'Calle 8 #234',
        notes: 'Pendiente de firma de contrato'
      },
      {
        id: 4,
        name: 'Ana Mart√≠nez',
        email: 'ana.martinez@example.com',
        phone: '(555) 456-7890',
        company: 'Desarrollos AM',
        status: 'active',
        priority: 'low',
        projects: 2,
        totalValue: 45000,
        lastActivity: '2025-11-26',
        address: 'Colonia Centro 789',
        notes: 'Proyectos peque√±os de mantenimiento'
      },
      {
        id: 5,
        name: 'Roberto Silva',
        email: 'roberto.silva@corp.com',
        phone: '(555) 567-8901',
        company: 'Silva Construcciones',
        status: 'inactive',
        priority: 'medium',
        projects: 0,
        totalValue: 0,
        lastActivity: '2025-10-15',
        address: 'Zona Industrial 321',
        notes: 'Sin proyectos activos desde octubre'
      }
    ];

    let allClients = [...clients]; // Copia para filtrado

    // ========== RENDERIZAR CLIENTES ==========
    function renderClients(clientsToRender = clients) {
      const tbody = document.getElementById('clients-tbody');
      
      if (clientsToRender.length === 0) {
        tbody.innerHTML = `
          <tr>
            <td colspan="8">
              <div class="empty-state">
                <i class="fas fa-users-slash"></i>
                <h3>No se encontraron clientes</h3>
                <p>Ajusta los filtros o agrega un nuevo cliente</p>
              </div>
            </td>
          </tr>
        `;
        return;
      }

      tbody.innerHTML = clientsToRender.map(client => `
        <tr>
          <td>
            <div class="client-info">
              <div class="client-avatar">${client.name.charAt(0)}</div>
              <div class="client-details">
                <h4>${client.name}</h4>
                <p>${client.company || 'Sin empresa'}</p>
              </div>
            </div>
          </td>
          <td>
            <div style="font-size: 13px;">
              <div style="margin-bottom: 4px;">
                <i class="fas fa-envelope" style="color: var(--text-light); margin-right: 6px;"></i>
                ${client.email}
              </div>
              <div>
                <i class="fas fa-phone" style="color: var(--text-light); margin-right: 6px;"></i>
                ${client.phone || 'N/A'}
              </div>
            </div>
          </td>
          <td>
            <span class="badge ${client.status}">
              ${client.status === 'active' ? 'Activo' : client.status === 'inactive' ? 'Inactivo' : 'Pendiente'}
            </span>
          </td>
          <td>
            <span class="priority-badge priority-${client.priority}">
              ${client.priority === 'high' ? 'Alta' : client.priority === 'medium' ? 'Media' : 'Baja'}
            </span>
          </td>
          <td>${client.projects}</td>
          <td style="font-weight: 600; color: var(--verdi-primary);">
            $${client.totalValue.toLocaleString()}
          </td>
          <td style="font-size: 13px; color: var(--text-medium);">
            ${formatDate(client.lastActivity)}
          </td>
          <td>
            <div class="actions-cell">
              <button class="action-btn" onclick="viewClient(${client.id})" title="Ver detalles">
                <i class="fas fa-eye"></i>
              </button>
              <button class="action-btn" onclick="editClient(${client.id})" title="Editar">
                <i class="fas fa-edit"></i>
              </button>
              <button class="action-btn" onclick="deleteClient(${client.id})" title="Eliminar">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </td>
        </tr>
      `).join('');
    }

    // ========== FILTROS ==========
    function filterClients() {
      const searchTerm = document.getElementById('search-input').value.toLowerCase();
      const statusFilter = document.getElementById('status-filter').value;
      const priorityFilter = document.getElementById('priority-filter').value;

      const filtered = allClients.filter(client => {
        const matchesSearch = client.name.toLowerCase().includes(searchTerm) ||
                             client.email.toLowerCase().includes(searchTerm) ||
                             (client.phone && client.phone.includes(searchTerm)) ||
                             (client.company && client.company.toLowerCase().includes(searchTerm));
        
        const matchesStatus = !statusFilter || client.status === statusFilter;
        const matchesPriority = !priorityFilter || client.priority === priorityFilter;

        return matchesSearch && matchesStatus && matchesPriority;
      });

      renderClients(filtered);
    }

    function clearFilters() {
      document.getElementById('search-input').value = '';
      document.getElementById('status-filter').value = '';
      document.getElementById('priority-filter').value = '';
      renderClients(allClients);
    }

    // ========== MODAL ==========
    let editingClientId = null;

    function openClientModal(clientId = null) {
      editingClientId = clientId;
      const modal = document.getElementById('client-modal');
      const title = document.getElementById('modal-title');
      
      if (clientId) {
        const client = clients.find(c => c.id === clientId);
        title.textContent = 'Editar Cliente';
        document.getElementById('client-name').value = client.name;
        document.getElementById('client-email').value = client.email;
        document.getElementById('client-phone').value = client.phone || '';
        document.getElementById('client-company').value = client.company || '';
        document.getElementById('client-status').value = client.status;
        document.getElementById('client-priority').value = client.priority;
        document.getElementById('client-address').value = client.address || '';
        document.getElementById('client-notes').value = client.notes || '';
      } else {
        title.textContent = 'Nuevo Cliente';
        document.getElementById('client-form').reset();
      }
      
      modal.classList.add('active');
    }

    function closeClientModal() {
      document.getElementById('client-modal').classList.remove('active');
      document.getElementById('client-form').reset();
      editingClientId = null;
    }

    function saveClient() {
      const name = document.getElementById('client-name').value;
      const email = document.getElementById('client-email').value;
      
      if (!name || !email) {
        alert('‚ö†Ô∏è Por favor completa los campos obligatorios');
        return;
      }

      const clientData = {
        name,
        email,
        phone: document.getElementById('client-phone').value,
        company: document.getElementById('client-company').value,
        status: document.getElementById('client-status').value,
        priority: document.getElementById('client-priority').value,
        address: document.getElementById('client-address').value,
        notes: document.getElementById('client-notes').value,
        lastActivity: new Date().toISOString().split('T')[0]
      };

      if (editingClientId) {
        // Editar cliente existente
        const index = clients.findIndex(c => c.id === editingClientId);
        clients[index] = { ...clients[index], ...clientData };
        console.log('‚úÖ Cliente actualizado:', clients[index]);
      } else {
        // Nuevo cliente
        const newClient = {
          id: Date.now(),
          ...clientData,
          projects: 0,
          totalValue: 0
        };
        clients.push(newClient);
        allClients = [...clients];
        console.log('‚úÖ Nuevo cliente creado:', newClient);
      }

      renderClients();
      closeClientModal();
      showNotification('√âxito', 'Cliente guardado correctamente', 'success');
    }

    // ========== ACCIONES ==========
    function viewClient(id) {
      const client = clients.find(c => c.id === id);
      alert(`üë§ ${client.name}\nüìß ${client.email}\nüìû ${client.phone}\nüè¢ ${client.company}\n\n${client.notes || 'Sin notas'}`);
    }

    function editClient(id) {
      openClientModal(id);
    }

    function deleteClient(id) {
      if (confirm('¬øEst√°s seguro de eliminar este cliente?')) {
        clients = clients.filter(c => c.id !== id);
        allClients = [...clients];
        renderClients();
        showNotification('Eliminado', 'Cliente eliminado correctamente', 'success');
      }
    }

    function exportClients() {
      const dataStr = JSON.stringify(clients, null, 2);
      const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
      const exportFileDefaultName = `clients_${new Date().toISOString().split('T')[0]}.json`;
      const linkElement = document.createElement('a');
      linkElement.setAttribute('href', dataUri);
      linkElement.setAttribute('download', exportFileDefaultName);
      linkElement.click();
      showNotification('Exportado', 'Clientes exportados correctamente', 'success');
    }

    // ========== HELPERS ==========
    function formatDate(dateStr) {
      const date = new Date(dateStr);
      const today = new Date();
      const diffTime = Math.abs(today - date);
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      
      if (diffDays === 0) return 'Hoy';
      if (diffDays === 1) return 'Ayer';
      if (diffDays < 7) return `Hace ${diffDays} d√≠as`;
      return date.toLocaleDateString('es-MX');
    }

    function showNotification(title, message, type) {
      console.log(`${type === 'success' ? '‚úÖ' : '‚ùå'} ${title}: ${message}`);
      // Aqu√≠ podr√≠as integrar con tu sistema de notificaciones
    }

    function setView(viewType) {
      const buttons = document.querySelectorAll('.view-btn');
      buttons.forEach(btn => btn.classList.remove('active'));
      event.target.closest('.view-btn').classList.add('active');
      
      if (viewType === 'grid') {
        alert('üöß Vista de cuadr√≠cula pr√≥ximamente');
      }
    }

    // ========== INIT ==========
    document.addEventListener('DOMContentLoaded', () => {
      renderClients();
      console.log('‚úÖ ClientSync inicializado con', clients.length, 'clientes');
    });
  </script>

</body>
</html>
